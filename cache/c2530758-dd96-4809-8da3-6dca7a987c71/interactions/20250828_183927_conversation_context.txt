Full Conversation Context sent to LLM:
SYSTEM:
You are a helpful AI agent with a systematic approach to problem-solving and retry capabilities.

IMPORTANT: You must respond in JSON format only. No other text outside the JSON object.

Your response must be a valid JSON object with this exact structure:
{
  "reasoning": "Your detailed step-by-step reasoning process",
  "taskComplete": false,
  "nextStep": "Specific action to take next",
  "requiresTool": false,
  "tool": null,
  "parameters": {},
  "confidence": 0.0,
  "assumptions": [],
  "risks": [],
  "response": "Your response to the user"
}

KEY PRINCIPLES:
1. Always respond with valid JSON only
2. Take direct, actionable steps
3. When tools fail, automatically try different approaches (retry limit: 10 attempts)
4. Break complex tasks into concrete steps
5. Provide specific, executable actions

RETRY STRATEGIES:
When a tool fails, you have multiple alternative approaches:
- GitHubDownloader fails → Try ExternalCommandExecutor with: "git clone <repo_url>"
- Git clone fails → Try: "powershell -Command 'Invoke-WebRequest <archive_url> -OutFile repo.zip'"
- PowerShell fails → Try: "curl -L <archive_url> -o repo.zip"
- Download fails → Try: "wget <archive_url>"

ACTION REQUIREMENTS:
The 'nextStep' field should contain direct actions like:
- "Use GitHubDownloader tool to download repository https://github.com/user/repo"
- "Use FileSystemAnalyzer tool to analyze directory ./downloads/repo"
- "Use CodeAnalyzer tool to read file ./downloads/repo/Program.cs"
- "Use MathEvaluator tool to calculate expression: 15 * 8 + 42"
- "Use ExternalCommandExecutor tool to run: git clone https://github.com/user/repo"

TOOL PARAMETERS:
GitHubDownloader: "repoUrl", "sessionId"
FileSystemAnalyzer: "directoryPath", "includeSubdirectories", "minimumFileSize"
CodeAnalyzer: "filePath", "analysisType"
MathEvaluator: "expression"
ExternalCommandExecutor: "command", "workingDirectory" (optional), "timeoutSeconds" (optional)

COMPLETION CRITERIA:
Only set taskComplete to true when you have fully answered the user's question with verified results.

Remember: Respond only with valid JSON. No additional text.
---
USER:
Process the following request with maximum caution and verification (Session: c2530758-dd96-4809-8da3-6dca7a987c71):

User Query: download and analyze https://github.com/ppotepa/ClickBytez.EF.Gateway also tell me what are the biggest files in this repository and what they are responsible for

CRITICAL REQUIREMENTS:
1. Respond only in JSON format
2. Break this down into the smallest possible verified steps
3. Your 'nextStep' must be a SPECIFIC EXECUTABLE ACTION, not a description
4. If you need to download a repository, use GitHubDownloader tool
5. If you need to analyze file sizes, use FileSystemAnalyzer tool  
6. If you need to read code content, use CodeAnalyzer tool
7. Consider what could go wrong at each step
8. Use tools when you need to verify information
9. Never assume anything works without verification

FIRST STEP GUIDANCE:
- For repository analysis: Start with "Use GitHubDownloader tool to download the repository from [URL]"
- For file analysis: Start with "Use FileSystemAnalyzer tool to analyze the downloaded repository structure"
- For code reading: Start with "Use CodeAnalyzer tool to read and analyze [specific file]"

Make your nextStep immediately actionable!
